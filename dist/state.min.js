!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.State=t():e.State=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="../dist/",t(0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){var t=this,r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,e);var o=r,c=[],i=!1;this.getState=function(){return t.truncateObject(o)},this.create=function(n,r){if("undefined"==typeof r){if(0===Object.keys(o).length)return new e(n);Object.assign(o,n)}else o=t.appendObject(n,r,o)},this.prop=function(e,n){if("undefined"==typeof n){var r=function(){var n=o;return e.split(".").filter(function(e){return e}).forEach(function(e){if("undefined"==typeof n[e])throw Error("Key doesn't exist");n=n[e]}),{v:"object"==typeof n?t.truncateObject(n):n}}();if("object"==typeof r)return r.v}else o=t.appendObject(e,n,o);if(i)return t};var u=function(e,t,n){for(var r=o,u=e.split("."),f=0;f<u.length-1;f++)r=r[u[f]];return Object.defineProperty(r,"_"+u[u.length-1],{set:function(e){"on"!==n||i?i&&c.push({callback:t,args:[r[u[u.length-1]],e]}):t(r[u[u.length-1]],e),r[u[u.length-1]]=e},get:function(){return r[u[u.length-1]]},enumerable:!0,configurable:!0}),function(){Object.defineProperty(r,"_"+u[u.length-1],{set:void 0,get:void 0,enumerable:!1})}};this.on=function(e,t){return u(e,t,"on")},this.next=function(e,t){return u(e,t,"next")},this.lock=function(){return i=!0,t},this.unlock=function(){i=!1;var e=c[0].args[0],n=c.pop().args[1];e="object"==typeof e?t.truncateObject(e):e,n="object"==typeof n?t.truncateObject(n):n,c[0].callback(e,n),c=[]}}return r(e,[{key:"appendObject",value:function(e,t,n){var r=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var c=e[o];if(Object.keys(r).indexOf("_"+c)!==-1){for(var i=this.copyObject(r[c]),u=i,f=o+1;f<e.length-1;f++)u=u[e[f]];u[e[e.length-1]]=t,r["_"+c]=i}r=r[c]}return Object.keys(r).indexOf("_"+e[e.length-1])!==-1?r["_"+e[e.length-1]]=t:r[e[e.length-1]]=t,n}},{key:"truncateObject",value:function(e){var t=this.copyObject(e),n=function e(t){Object.keys(t).forEach(function(n){"_"===n.charAt(0)&&delete t[n],"object"==typeof t[n]&&null!==t[n]&&e(t[n])})};return n(t),t}},{key:"copyObject",value:function(e){var t=this;if(null===e||"object"!=typeof e)return e;var n=Object.create(Object.getPrototypeOf(e)),r=Object.getOwnPropertyNames(e);return r.forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);"object"==typeof o.value&&(o.value=t.copyObject(o.value)),Object.defineProperty(n,r,o)}),n}}]),e}();t.default=new o,e.exports=t.default}])});